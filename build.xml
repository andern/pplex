<?xml version="1.0"?>

<project name="pplex" default="jar">
  <taskdef name="jarbundler" classname="net.sourceforge.jarbundler.JarBundler" />

  <target name="clean" description="remove intermediate files">
    <delete dir="bin"/>
  </target>

  <target name="clobber" depends="clean" description="remove all artifact files">
    <delete file="pplex.jar"/>
    <delete dir="pplex.app"/>
  </target>

  <target name="compile" description="compile the Java source code to class files">
    <mkdir dir="bin"/>
    <javac includeantruntime="false" srcdir="src" destdir="bin"/>
  </target>

  <target name="jar" depends="compile" description="create a Jar file for the application">
    <jar destfile="pplex.jar">
      <fileset dir="bin" includes="**/*.class"/>
      <manifest>
        <attribute name="Main-class" value="controller/Main"/>
      </manifest>
    </jar>
  </target>
  
  <target name="mac" depends="jar" description="create a runnable app file for Mac OS">
    <jarbundler dir="." name="pplex" mainclass="controller/Main" jar="pplex.jar" />
  </target>
</project>

